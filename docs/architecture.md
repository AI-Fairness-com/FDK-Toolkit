# ğŸ§± FDKâ„¢ System Architecture

[![License: Apache-2.0](https://img.shields.io/badge/License-Apache--2.0-green.svg)](https://www.apache.org/licenses/LICENSE-2.0)

This document describes the core architecture of the **Fairness Diagnostic Kit (FDKâ„¢)**, including the main components, request flow, and the way domain-specific fairness pipelines are integrated into the toolkit.

---

## ğŸŒ High-Level Overview

FDKâ„¢ is a Flask-based web toolkit that exposes **seven domain-specific fairness audit modules** through a unified interface:

- Business  
- Education  
- Finance  
- Health  
- Hiring  
- Justice  
- Governance  

Each domain uses the same architectural pattern:

1. **Upload CSV dataset**  
2. **Automatic column detection and mapping**  
3. **Domain-specific fairness pipeline execution**  
4. **Metric computation (36â€“56 metrics/domain)**  
5. **Composite bias score & severity classification**  
6. **Plain-language summary generation**  
7. **Downloadable JSON audit report**

---

## ğŸ§© Core Components

At a high level, the repository is organised as follows:

```text
FDK-Toolkit/
â”‚
â”œâ”€â”€ Business/              # Business domain API
â”‚   â”œâ”€â”€ fdk_business.py
â”‚   â”œâ”€â”€ fdk_business_pipeline.py
â”‚   â””â”€â”€ templates/         # Domain-specific templates
â”‚       â”œâ”€â”€ upload_business.html
â”‚       â”œâ”€â”€ auto_confirm_business.html
â”‚       â””â”€â”€ result_business.html
â”‚
â”œâ”€â”€ Education/             # Education domain API
â”‚   â”œâ”€â”€ fdk_education.py
â”‚   â”œâ”€â”€ fdk_education_pipeline.py
â”‚   â””â”€â”€ templates/
â”‚
â”œâ”€â”€ Finance/               # Finance domain API
â”‚   â”œâ”€â”€ fdk_finance.py
â”‚   â”œâ”€â”€ fdk_finance_pipeline.py
â”‚   â””â”€â”€ templates/
â”‚
â”œâ”€â”€ Health/                # Health domain API
â”‚   â”œâ”€â”€ fdk_health.py
â”‚   â”œâ”€â”€ fdk_health_pipeline.py
â”‚   â””â”€â”€ templates/
â”‚
â”œâ”€â”€ Hiring/                # Hiring domain API
â”‚   â”œâ”€â”€ fdk_hiring.py
â”‚   â”œâ”€â”€ fdk_hiring_pipeline.py
â”‚   â””â”€â”€ templates/
â”‚
â”œâ”€â”€ Justice/               # Justice domain API
â”‚   â”œâ”€â”€ fdk_justice.py
â”‚   â”œâ”€â”€ fdk_justice_pipeline.py
â”‚   â””â”€â”€ templates/
â”‚       â”œâ”€â”€ upload_justice.html
â”‚       â”œâ”€â”€ upload_justice_render.html
â”‚       â”œâ”€â”€ auto_confirm_justice.html
â”‚       â””â”€â”€ result_justice.html
â”‚
â”œâ”€â”€ Governance/            # Governance domain API
â”‚   â”œâ”€â”€ fdk_governance.py
â”‚   â”œâ”€â”€ fdk_governance_pipeline.py
â”‚   â””â”€â”€ templates/
â”‚
â”œâ”€â”€ app.py                 # Flask app entry point
â”œâ”€â”€ requirements.txt
â”œâ”€â”€ render.yaml
â”œâ”€â”€ .python-version
â”œâ”€â”€ LICENSE
â”œâ”€â”€ NOTICE
â””â”€â”€ README.md
Each domain folder follows this consistent pattern:

fdk_<domain>.py â€” Flask blueprint for that domain

fdk_<domain>_pipeline.py â€” domain-specific fairness pipeline

templates/ â€” domain-specific HTML templates

ğŸ—ï¸ Application Layer (app.py)
app.py is the central entry point of the toolkit. It is responsible for:

Creating and configuring the Flask application

Registering each domain's blueprint (Business, Education, Finance, Health, Hiring, Justice, Governance)

Setting up session handling and configuration needed for:

File upload

Temporary storage of mappings

Passing audit results to templates

From a user's perspective, all domain routes are served from this single Flask app.

ğŸ§± Domain Blueprints (fdk_<domain>.py)
Each domain has its own Flask blueprint module that defines a consistent set of routes.

For a generic <domain>, the typical routes are:

/<domain>-upload

Renders the upload page

Accepts a CSV file

Triggers automatic column detection

/<domain>-auto-confirm (or equivalent)

Shows the detected column mappings:

Group attributes (protected/sensitive features)

Outcome (y_true)

Prediction (y_pred)

Optional probabilities (y_prob)

Allows the user to confirm or adjust these mappings

/<domain>-run-audit

Loads the dataset and final mapping

Calls the domain pipeline (fdk_<domain>_pipeline.py)

Receives a structured fairness audit result

Stores or forwards the result to the result template

/download-<domain>-report/<filename>

Serves the JSON report generated by the pipeline

Allows users to download audit outputs for archiving or further analysis

This blueprint separation ensures modularity: each domain can evolve independently while sharing a common pattern.

ğŸ§® Domain Pipelines (fdk_<domain>_pipeline.py)
Each domain pipeline encapsulates the fairness computation logic:

Validates the input DataFrame and checks required columns

Applies domain-specific fairness metrics (typically 36â€“56 metrics depending on domain)

Computes:

Group fairness metrics

Error rate and calibration differences

Distributional and domain-specific fairness indicators

Aggregates results into a structured response object, typically including:

domain

metrics_calculated

metric_categories

fairness_metrics (dictionary of metric â†’ value)

composite_bias_score

severity (e.g. LOW / MEDIUM / HIGH bias)

summary (plain-language narrative)

timestamp

The pipelines are designed so that:

The JSON schema is consistent across domains

Only the metric set and narrative logic differ by domain

ğŸ–¼ï¸ Templating Layer (HTML Pages)
Each domain uses three main HTML templates in its own templates/ subfolder:

Upload Page (upload_<domain>.html / upload_<domain>_render.html)

Describes the domain context (e.g. Business, Health, Justice)

Provides a CSV upload form

Includes high-level metric information and disclaimers

Auto-Confirm Page (auto_confirm_<domain>.html)

Displays auto-detected column mappings

Shows how FDKâ„¢ interprets:

Group attributes

Outcomes

Predictions

Probabilities

Offers a button to "Run Fairness Audit" for that domain

Result Page (result_<domain>.html)

Displays:

Composite bias score

Overall severity classification

Key metric results

Narrative, domain-specific summary

Provides a link or button to:

Download the JSON audit report

Start a new audit

This templating pattern is repeated uniformly across the seven domains.

ğŸ” End-to-End Request Flow
For any given domain, the end-to-end flow is:

User visits /<domain>-upload

Uploads a CSV dataset

Flask saves the file and runs auto-detection of relevant columns

User is redirected to /<domain>-auto-confirm

Columns and their interpreted roles are shown for review

On confirmation, the system calls the corresponding domain pipeline

The pipeline returns:

Numeric fairness metrics

Composite score and severity

Human-readable summary

These results are:

Rendered in the result_<domain>.html page

Saved as a JSON report file

User can:

Read the summary on screen

Download the JSON report

Start a new audit

ğŸ§¬ Cross-Domain Consistency
All domains share the same architectural skeleton:

Same upload â†’ confirm â†’ results UX flow

Same mapping logic pattern (group, outcome, prediction, probability)

Same JSON output structure

Same composite-score logic (with domain-specific parameters)

Only the following are domain-specific:

Selected metrics and their weights

Narrative templates (how findings are explained)

Domain-specific disclaimers and examples

This consistency is intentional and supports:

Teaching (students can move between domains easily)

Research (metrics comparable across sectors)

Governance and audit workflows (same type of report across multiple regulated areas)

ğŸ§­ Relation to the FDKâ„¢ Book
The architecture implements, in software form, the framework introduced in:

The Fairness Diagnostic Kit (FDKâ„¢): Tools for Auditing, Education, and Governance of Responsible AI (Tavakoli, 2025)

Specifically:

Domain folders map to the seven application areas described in the book

Pipelines implement the metric taxonomies and composite scoring logic

JSON outputs and summaries embody the educational and governance-oriented narratives presented in the text

ğŸ“¬ Contact
For architectural questions, academic collaboration, or technical feedback:
info@ai-fairness.com
